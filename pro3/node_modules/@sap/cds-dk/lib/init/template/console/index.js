const { join } = require("path");
const mvn = require("../../mvn");

const { readProject } = require("../../projectReader");
const { merge } = require("../../merge");

module.exports = class ConsoleTemplate extends require("../../plugin") {
  static help() {
    return "installs the CAP console plugin";
  }

  async run() {
    const { isJava } = readProject();

    if (isJava) {
      await mvn.add("CAP_JAVA_PLUGIN", {
        groupId: "com.sap.cds",
        artifactId: "cds-feature-console",
        version: "1.0.0"
      });
    } else {
      await merge(join(__dirname, "files", "package.json")).into("package.json");
    }
  }
};
