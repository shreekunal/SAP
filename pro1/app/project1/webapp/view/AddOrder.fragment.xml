<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:layout="sap.ui.layout.form">
    <Dialog id="addOrderDialog" title="Add Order" stretchOnPhone="true">
        <content>
            <layout:SimpleForm maxContainerCols="2" editable="true">
                <Label text="Order No" />
                <Input value="{newOrder>/orderNo}" />

                <Label text="Date" />
                <DatePicker value="{newOrder>/date}" displayFormat="yyyy-MM-dd" />

                <Label text="Customer" />
                <Input value="{newOrder>/customerName}" />

                <Label text="Items" />
                <VBox>
                    <Table id="itemsTable" items="{path: 'newOrder>/items'}">
                        <headerToolbar>
                            <Toolbar>
                                <Title text="Order Items" />
                                <ToolbarSpacer />
                                <Button text="Add Item" press="onAddItem" />
                            </Toolbar>
                        </headerToolbar>
                        <columns>
                            <Column>
                                <Text text="Price" />
                            </Column>
                            <Column>
                                <Text text="Unit" />
                            </Column>
                            <Column>
                                <Text text="Quantity" />
                            </Column>
                            <Column>
                                <Text text="Actions" />
                            </Column>
                        </columns>
                        <items>
                            <ColumnListItem>
                                <cells>
                                    <Input value="{newOrder>price}" />
                                    <Input value="{newOrder>unit}" />
                                    <Input value="{newOrder>quantity}" />
                                    <Button text="Remove" press="onRemoveItem" />
                                </cells>
                            </ColumnListItem>
                        </items>
                    </Table>
                </VBox>

                <Label text="Attachments" />
                <VBox>
                    <HBox>
                        <Input id="attachFileName" placeholder="File name" />
                        <Input id="attachMimeType" placeholder="MIME type" style="margin-left:8px;" />
                        <Button text="Add" press="onAddAttachment" style="margin-left:8px;" />
                    </HBox>
                    <Table id="attachmentsTable" items="{path: 'newOrder>/attachments'}">
                        <columns>
                            <Column>
                                <Text text="File Name" />
                            </Column>
                            <Column>
                                <Text text="MIME Type" />
                            </Column>
                            <Column>
                                <Text text="Actions" />
                            </Column>
                        </columns>
                        <items>
                            <ColumnListItem>
                                <cells>
                                    <Text text="{newOrder>fileName}" />
                                    <Text text="{newOrder>mimeType}" />
                                    <Button text="Remove" press="onRemoveAttachment" />
                                </cells>
                            </ColumnListItem>
                        </items>
                    </Table>
                </VBox>
            </layout:SimpleForm>
        </content>
        <beginButton>
            <Button text="Create" press="onSubmitAddOrder" />
        </beginButton>
        <endButton>
            <Button text="Cancel" press="onCloseAddOrder" />
        </endButton>
    </Dialog>
</core:FragmentDefinition>