<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:layout="sap.ui.layout.form"
    xmlns:unified="sap.ui.unified">
    <Dialog id="addOrderDialog" title="Add Order" stretchOnPhone="true">
        <content>
            <layout:SimpleForm maxContainerCols="2" editable="true">
                <Label text="Order No" />
                <Input value="{newOrder>/orderNo}" />

                <Label text="Date" />
                <DatePicker value="{newOrder>/date}" displayFormat="yyyy-MM-dd" />

                <Label text="Customer" />
                <Input value="{newOrder>/customerName}" />

                <Label text="Items" />
                <VBox>
                    <Table items="{path: 'newOrder>/items'}">
                        <headerToolbar>
                            <Toolbar>
                                <Title text="Order Items" />
                                <ToolbarSpacer />
                                <Button text="Add Item" press="onAddItem" />
                            </Toolbar>
                        </headerToolbar>
                        <columns>
                            <Column>
                                <Text text="Price" />
                            </Column>
                            <Column>
                                <Text text="Unit" />
                            </Column>
                            <Column>
                                <Text text="Quantity" />
                            </Column>
                            <Column>
                                <Text text="Actions" />
                            </Column>
                        </columns>
                        <items>
                            <ColumnListItem>
                                <cells>
                                    <Input value="{newOrder>price}" />
                                    <Select selectedKey="{newOrder>unit}">
                                        <items>
                                            <core:Item key="pcs" text="pcs" />
                                            <core:Item key="kg" text="kg" />
                                            <core:Item key="liters" text="liters" />
                                            <core:Item key="boxes" text="boxes" />
                                        </items>
                                    </Select>
                                    <Input value="{newOrder>quantity}" />
                                    <Button text="Remove" press="onRemoveItem" />
                                </cells>
                            </ColumnListItem>
                        </items>
                    </Table>
                </VBox>

                <Label text="Attachments" />
                <VBox>
                    <HBox alignItems="Center" space="0.5rem">
                        <unified:FileUploader id="fileUploader" name="fileUploader"
                            uploadEnabled="false" placeholder="Select a file" change="onFileChange" />
                        <Button text="Add" press="onAddAttachment" />
                    </HBox>
                    <Table items="{path: 'newOrder>/attachments'}">
                        <columns>
                            <Column>
                                <Text text="File Name" />
                            </Column>
                            <Column>
                                <Text text="MIME Type" />
                            </Column>
                            <Column>
                                <Text text="Actions" />
                            </Column>
                        </columns>
                        <items>
                            <ColumnListItem>
                                <cells>
                                    <Text text="{newOrder>fileName}" />
                                    <Text text="{newOrder>mimeType}" />
                                    <Button text="Remove" press="onRemoveAttachment" />
                                </cells>
                            </ColumnListItem>
                        </items>
                    </Table>
                </VBox>
            </layout:SimpleForm>
        </content>
        <footer>
            <Toolbar>
                <ToolbarSpacer />
                <Button text="Save" press="onSubmitAddOrder" type="Emphasized" />
                <Button text="Save Draft" press="onSaveDraft" />
                <Button text="Cancel" press="onCloseAddOrder" />
            </Toolbar>
        </footer>
    </Dialog>
</core:FragmentDefinition>